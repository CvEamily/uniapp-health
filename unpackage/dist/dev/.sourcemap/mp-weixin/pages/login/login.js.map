{"version":3,"sources":["uni-app:///main.js","webpack:///D:/微信小程序项目/health/pages/login/login.vue?130b","webpack:///D:/微信小程序项目/health/pages/login/login.vue?5c84","webpack:///D:/微信小程序项目/health/pages/login/login.vue?5ed0","webpack:///D:/微信小程序项目/health/pages/login/login.vue?a83d","uni-app:///pages/login/login.vue","webpack:///D:/微信小程序项目/health/pages/login/login.vue?0720"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniIcons","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","token","url","user_info","username","socketTask2","info","onLoad","methods","closeSocket","uni","success","that","fail","connectSocketInit","gotoFace","getToken","setUser","allinformation","params","title","res","duration","icon","formSubmit","gotoRegister","gotoPassword"],"mappings":"2IAAA,MAGA,aACA,WAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,+ECLX,iIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wBACZ,aAAAF,E,yCCvBf,sQ,gCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,SAAU,WACR,OAAO,yHAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,gCCjCvB,wHAAknB,eAAG,G,sJCsBrnB,W,EACA,CACAC,gBACA,OACAC,SACAC,iCACAC,aACAC,YACAC,iBACAC,UAGAC,oBAGAC,SACAC,uBAEA,WACAC,eACAC,oBACAC,gBACAxB,uBAEAyB,iBACAzB,0BAIA0B,6BAAA,WACA,kCACAZ,6DACAS,mBACAvB,8DAGAA,8BAEA,qCACAA,oCACA,gBAEA,oBACAY,qBACAW,mBAAA,yHACAvB,sBAAA,0CADA,SAMA,wCACA,0BACAd,2CACAA,mDACAA,kDAEA,qCACAc,0BAGA2B,oBACAL,cACAR,+BAGAc,oBACA,sCAEAC,mBACA3C,8CAEA4C,2BAAA,8IAQA,OAPAC,GACA,gBACA,gBAGAT,eACAU,kBACA,SACAV,qDAAA,mBAAAW,SACAA,WAAA,gBAEA,OADA,mBACA,uCAGAjC,oBACAsB,aACAU,aACAE,aACAC,cACA,2CApBA,IAwBAC,uBAAA,8IAcA,OAbAL,GACA,iCACA,iCACA,gBACA,mDACA,2BAEA,YAGAT,eACAU,cAEA,SACAV,sBAAA,mBAAAW,SACAA,eAAA,gBAGA,OAFA/C,iCACAA,kCACA,uBACA,4CACA,8BAGA,OAFAoC,aACAR,2BACA,kBACAQ,aACAU,WACAE,aACAC,eACA,QAEAb,aACAU,WACAE,aACAC,cACA,2CAnCA,IAsCAE,wBACAf,cACAR,8BAGAwB,wBACAhB,cACAR,+BAIA,c,4ECtKA,wHAA6pC,eAAG,G","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&\"","var components\ntry {\n  components = {\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"bg _myTheme\">\r\n    <view class=\"content _myTheme1\">\r\n      <div>LOGIN</div>\r\n      <form @submit=\"formSubmit\" @reset=\"formReset\">\r\n        <input type=\"text\" name=\"username\" v-model=\"username\" placeholder=\"账号\" placeholder-class=\"placeholderClass\">\r\n        <input type=\"password\" name=\"password\" placeholder=\"密码\" placeholder-class=\"placeholderClass\">\r\n        <button form-type=\"submit\" class=\"send\">\r\n          <box class=\"icon\">\r\n            <uni-icons type=\"paperplane\" size=\"15\" color=\"white\"></uni-icons>\r\n          </box>\r\n          SEND\r\n        </button>\r\n      </form>\r\n    </view>\r\n    <div class=\"forget _myTheme\" @click=\"gotoPassword\">Forget password?</div>\r\n    <div class=\"forget face _myTheme\" @click=\"gotoFace\">Face recognition</div>\r\n    <div class=\"reg\" @click=\"gotoRegister\">Register now</div>\r\n  </view>\n</template>\n\n<script>\r\n  import config from '../../utils/config'\n  export default {\n    data() {\n      return {\n        token:'',\r\n        url:config.host+'/user/login',\r\n        user_info:[],\r\n        username:'',\r\n        socketTask2: null,\r\n        info:[],\r\n      };\n    },\r\n    onLoad(){\r\n      \r\n    },\r\n    methods: {\r\n      closeSocket(){\r\n        // 关闭 WebSocket 连接。\r\n        const that = this\r\n        uni.closeSocket({\r\n          success(res) {\r\n            that.socketOpen = false;\r\n            console.log(\"关闭成功\", res)\r\n          },\r\n          fail(err) {\r\n            console.log(\"关闭失败\", err)\r\n          }\r\n        });\r\n      },\r\n      connectSocketInit(){\r\n        this.socketTask2 = uni.connectSocket({\r\n        \turl: config.WebSocket+`/websocket2/${this.username}`,\r\n          success:()=>{\r\n            console.log('this.socketTask = uni.connectSocket success');\r\n          }\r\n        });\r\n        console.log(this.socketTask2);\r\n        // 消息的发送和接收必须在正常连接打开中,才能发送或接收【否则会失败】\r\n        this.socketTask2.onOpen((res) => {\r\n          console.log(\"WebSocket连接正常打开中...！\");\r\n          this.socketOpen = true;\r\n          // 注：只有连接正常打开中 ，才能正常成功发送消息\r\n          this.socketTask2.send({\r\n            data: \"uni-app发送一条消息\",\r\n            async success() {\r\n              console.log(\"消息发送成功\");\r\n            },\r\n          });\r\n          // 注：只有连接正常打开中 ，才能正常收到消息\r\n        })\r\n        this.socketTask2.onMessage((res) => {\r\n          this.info=JSON.parse(res.data)\r\n          wx.setStorageSync('allUser',this.info.allUser);\r\n          wx.setStorageSync('onlineUsers',this.info.onlineUsers);\r\n          wx.setStorageSync('unreadsum',this.info.unreadsum);\r\n        });\r\n        this.socketTask2.onClose(() => {\r\n          console.log(\"已经被关闭了\")\r\n        })\r\n      },\r\n      gotoFace(){\r\n        uni.navigateTo({\r\n          url: './faceLogin/faceLogin'\r\n        })\r\n      },\r\n      getToken(){\r\n        this.token=wx.getStorageSync(\"token\")\r\n      },\r\n      setUser(){\r\n        wx.setStorageSync('user_info',this.user_info)\r\n      },\r\n      async allinformation(e) {\r\n      \tconst params = {\r\n          \"setMyHeaderxxx\": {\r\n            \"token\":this.token\r\n           }\r\n      \t};\r\n      \tuni.showLoading({\r\n      \t\ttitle:\"Loading\"\r\n      \t})\r\n        const {data: res} = await uni.$http.get(config.host+'/user/allinformation', params);  \r\n      \tif (res.code == 1) {\r\n          this.user_info=res.data;\r\n          this.setUser();\r\n      \t\treturn ;\r\n      \t} else {\r\n          console.log(res.code);\r\n      \t\tuni.showToast({\r\n      \t\t\ttitle: '加载失败',\r\n      \t\t\tduration: 2000,\r\n      \t\t\ticon: 'none'\r\n      \t\t});    \r\n      \t}\r\n      },\r\n      //登录\n\t\t\tasync formSubmit(e) {\r\n\t\t\t\tconst params = {\n\t\t\t\t\t\"username\": e.detail.value.username,\n\t\t\t\t\t\"password\": e.detail.value.password,\r\n           \"setMyHeaderxxx\": { \r\n              'content-type': 'application/x-www-form-urlencoded',\r\n              \"accept\": \"application/json\",\r\n          },\r\n          \"unToken\":true\n\t\t\t\t};\n        // 开启loading\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle:\"登录中\"\n\t\t\t\t})\n        //发送请求\r\n        const {data: res} = await uni.$http.post(this.url, params);\n\t\t\t\tif (res.code == '200') {\r\n          wx.setStorageSync('token',res.data);\r\n          wx.setStorageSync('username','小明');\r\n          this.getToken();\r\n          await this.allinformation();\r\n          await this.connectSocketInit();\r\n          uni.switchTab({\r\n            url:'/pages/index/index'\r\n          })\r\n\t\t\t\t\treturn uni.showToast({\n\t\t\t\t\t\ttitle: '成功',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\r\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '失败',\n\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});    \n\t\t\t\t}\n\t\t\t},\r\n      gotoRegister(){\r\n        uni.navigateTo({\r\n          url: '../register/register'\r\n        })\r\n      },\r\n      gotoPassword(){\r\n        uni.navigateTo({\r\n          url: './Password/Password'\r\n        })\r\n      }\r\n    }\r\n}\n</script>\n\n<style lang=\"scss\">\r\n  .bg{\r\n    display: table-cell;\r\n    vertical-align: middle;\r\n    width: 800rpx;\r\n    height: 1206rpx;\r\n    background-color: #ebedee;\r\n    .content{\r\n      width: 800rpx;\r\n      height: 600rpx;\r\n      text-align: center;\r\n      div{\r\n        display: flex;\r\n        justify-content: center;\r\n        align-item: center;\r\n        flex-direction: column;\r\n        top: -200rpx;\r\n        left: 0;\r\n        width: 800rpx;\r\n        height: 150rpx;\r\n        font-size: 40rpx;\r\n        font-weight: 700;\r\n      }\r\n      form{\r\n        display: flex;\r\n        justify-content: center;\r\n        align-item: center;\r\n        flex-direction: column;\r\n        top: -200rpx;\r\n        left: 0;\r\n        input{\r\n          width:600rpx;\r\n          height: 90rpx;\r\n          font-size: 20;\r\n          margin: 0 auto;\r\n          margin-top: 20rpx;\r\n          padding-left: 40rpx;\r\n          border-radius: 50rpx;\r\n          background-color: #f2f2f2;\r\n        }\r\n        .placeholderClass{\r\n          color: #c2c6df;\r\n          font-size: 25rpx;\r\n          font-weight: 700;\r\n          text-align: left;\r\n        }\r\n        button{\r\n          width: 240rpx;\r\n          height: 80rpx;\r\n          font-size: 35rpx;\r\n          text-align: center;\r\n          line-height: 80rpx;\r\n          color: #827ffe;\r\n        }\r\n        .send{\r\n          width: 180rpx;\r\n          height: 80rpx;\r\n          color: white;\r\n          font-size: 25rpx;\r\n          font-weight: 700;\r\n          margin-top: 60rpx;\r\n          background-color: #827ffe;\r\n          border-radius: 100rpx;\r\n          .icon{\r\n            margin-right: 10rpx;\r\n            font-weight: 400;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .forget{\r\n      position: absolute;\r\n      top: 920rpx;\r\n      left: 450rpx;\r\n      width: 300rpx;\r\n      height: 50rpx;\r\n      color: black;\r\n      font-size: 28rpx;\r\n      font-weight: 700;\r\n    }\r\n    .face{\r\n      top: 1000rpx;\r\n    }\r\n    .reg{\r\n      position: absolute;\r\n      top: 920rpx;\r\n      left: 60rpx;\r\n      width: 300rpx;\r\n      height: 50rpx;\r\n      color: #827ffe;\r\n      font-size: 28rpx;\r\n      font-weight: 700;\r\n    }\r\n  }\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}